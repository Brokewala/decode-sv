<x-app-layout> <x-slot name="header"> <div class="flex justify-between items-center"> <h2 class="font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"> {{ __('admin.users.title') }} </h2> <livewire:admin-language-switcher > </div> </x-slot> <div class="py-12"> <div class="max-w-7xl mx-auto sm:px-6 lg:px-8"> <!-- Messages de succÃ¨s/erreur --> @if (session('success')) <div class="mb-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded"> {{ session('success') }} </div> @endif @if (session('error')) <div class="mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded"> {{ session('error') }} </div> @endif <!-- Filtres --> <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg mb-6"> <div class="p-6"> <form method="GET" action="{{ route('admin.users') }}" class="grid grid-cols-1 md:grid-cols-3 gap-4"> <div> <label for="search" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Recherche</label> <input type="text" name="search" id="search" value="{{ request('search') }}" placeholder="Nom ou email..." class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"> </div> <div> <label for="sort" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tri</label> <select name="sort" id="sort" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"> <option value="newest" {{ request('sort') == 'newest' ? 'selected' : '' }}>Plus rÃ©cents</option> <option value="oldest" {{ request('sort') == 'oldest' ? 'selected' : '' }}>Plus anciens</option> <option value="name" {{ request('sort') == 'name' ? 'selected' : '' }}>Nom A-Z</option> <option value="points_desc" {{ request('sort') == 'points_desc' ? 'selected' : '' }}>Plus de points</option> <option value="points_asc" {{ request('sort') == 'points_asc' ? 'selected' : '' }}>Moins de points</option> </select> </div> <div class="flex items-end"> <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"> Filtrer </button> </div> </form> </div> </div> <!-- Liste des utilisateurs --> <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> @if($users->count() > 0) <div class="overflow-x-auto"> <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700"> <thead class="bg-gray-50 dark:bg-gray-700"> <tr> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"> Utilisateur </th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"> Statut </th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"> Points </th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"> Inscription </th> <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"> Actions </th> </tr> </thead> <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"> @foreach($users as $user) <tr class="hover:bg-gray-50 dark:hover:bg-gray-700"> <td class="px-6 py-4 whitespace-nowrap"> <div class="flex items-center"> <div class="flex-shrink-0 h-10 w-10"> <div class="h-10 w-10 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center"> <span class="text-sm font-medium text-gray-700 dark:text-gray-300"> {{ strtoupper(substr($user->name, 0, 2)) }} </span> </div> </div> <div class="ml-4"> <div class="text-sm font-medium text-gray-900 dark:text-white"> {{ $user->name }} </div> <div class="text-sm text-gray-500 dark:text-gray-400"> {{ $user->email }} </div> </div> </div> </td> <td class="px-6 py-4 whitespace-nowrap"> @if($user->is_admin) <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200"> ğŸ‘‘ Administrateur </span> @else <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"> ğŸ‘¤ Utilisateur </span> @endif </td> <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white"> <div class="flex items-center"> <svg class="w-4 h-4 text-yellow-500 mr-1" fill="currentColor" viewBox="0 0 20 20"> <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path> </svg> {{ $user->points }} </div> </td> <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"> {{ $user->created_at->format('d/m/Y') }} </td> <td class="px-6 py-4 whitespace-nowrap text-sm font-medium"> @if($user->id !== auth()->id()) <form method="POST" action="{{ route('admin.toggle-admin', $user) }}" class="inline"> @csrf @if($user->is_admin) <button type="submit" onclick="return confirm('ÃŠtes-vous sÃ»r de vouloir retirer les droits d'administrateur Ã  {{ $user->name }} ?')" class="text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"> Retirer admin </button> @else <button type="submit" onclick="return confirm('ÃŠtes-vous sÃ»r de vouloir promouvoir {{ $user->name }} en administrateur ?')" class="text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300"> Promouvoir admin </button> @endif </form> @else <span class="text-gray-400 dark:text-gray-500">Vous-mÃªme</span> @endif </td> </tr> @endforeach </tbody> </table> </div> <!-- Pagination --> <div class="mt-6"> {{ $users->links() }} </div> @else <div class="text-center py-12"> <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path> </svg> <h3 class="mt-2 text-sm font-medium text-gray-900 dark:text-white">Aucun utilisateur trouvÃ©</h3> <p class="mt-1 text-sm text-gray-500 dark:text-gray-400"> Aucun utilisateur ne correspond aux critÃ¨res de recherche. </p> </div> @endif </div> </div> <!-- Statistiques rapides --> <div class="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6"> <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> <div class="flex items-center"> <div class="flex-shrink-0"> <svg class="h-8 w-8 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"></path> </svg> </div> <div class="ml-4"> <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Administrateurs</p> <p class="text-2xl font-semibold text-gray-900 dark:text-white"> {{ $users->where('is_admin', true)->count() }} </p> </div> </div> </div> </div> <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> <div class="flex items-center"> <div class="flex-shrink-0"> <svg class="h-8 w-8 text-blue-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path> </svg> </div> <div class="ml-4"> <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Utilisateurs</p> <p class="text-2xl font-semibold text-gray-900 dark:text-white"> {{ $users->where('is_admin', false)->count() }} </p> </div> </div> </div> </div> <div class="bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg"> <div class="p-6"> <div class="flex items-center"> <div class="flex-shrink-0"> <svg class="h-8 w-8 text-yellow-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path> </svg> </div> <div class="ml-4"> <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Points totaux</p> <p class="text-2xl font-semibold text-gray-900 dark:text-white"> {{ $users->sum('points') }} </p> </div> </div> </div> </div> </div> </div> </div>
</x-app-layout>
